Helm:
install_requirements:
  implementation: install_requirements.yaml
  inputs:
    repository: https://github.com/QCDIS/helm_playbooks.git
    inventory:
      all:
        hosts:
          master:
            ansible_host: { get_attribute: [ compute,public_ip ] }
            ansible_python_interpreter: /usr/bin/python3
            ansible_ssh_user: { get_property: [ compute,user_name ] }
install_chart:
  implementation: install_chart.yaml
  inputs:
    repository: https://github.com/QCDIS/helm_playbooks.git
    extra_variables:
      chart_name: prometheus-community/kube-prometheus-stack
      repo_name: prometheus-community
      repo_url: 'https://prometheus-community.github.io/helm-charts'
      name: application
      namespace: default
#      values:
#        alertmanager:
#          enabled: true
#          service:
#            type: ClusterIP
    inventory:
      all:
        hosts:
          master:
            ansible_host: { get_attribute: [ COMPUTE,public_ip ] }
            ansible_python_interpreter: /usr/bin/python3
            ansible_ssh_user: { get_property: [ COMPUTE,user_name ] }
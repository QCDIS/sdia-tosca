Azure:
  create_resoucre_group:
    implementation: resource_group/create_resource_groups.yaml
    inputs:
      repository: https://github.com/QCDIS/azure_playbooks.git
      extra_variables:
        region: { get_property: [ topology, domain ] }
      inventory:
        all:
          hosts:
            localhost:
              ansible_connection: local
              instances:
                compute:
                  os_distro : { get_property: [ compute, os_distro ]}
                compute_1:
                  os_distro : { get_property: [ compute, os_distro ]}
  select_image:
    implementation: info/get_images.yaml
    inputs:
      repository: https://github.com/QCDIS/azure_playbooks.git
      extra_variables:
        region: { get_property: [ topology, domain ] }
      inventory:
        all:
          hosts:
            localhost:
              ansible_connection: local
              instances:
                compute:
                  os_distro : { get_property: [ compute, os_distro ]}
                  os_version : { get_property: [ compute, os_version ]}
                compute_1:
                  os_distro : { get_property: [ compute, os_distro ]}
                  os_version : { get_property: [ compute, os_version ]}
  create:
    implementation: vm/create_vms.yaml
    inputs:
      extra_variables:
        region: { get_property: [ topology, domain ] }
      inventory:
        all:
          hosts:
            localhost:
              ansible_connection: local
              instances:
                compute:
                  user_name: { get_property: [ compute, user_name ] }
                  os_distro: { get_property: [ compute, os_distro ] }
                  os_version: { get_property: [ compute_1, os_version ] }
                compute_1:
                  user_name: { get_property: [ compute_1, user_name ] }
                  os_distro: { get_property: [ compute, os_distro ] }
                  os_version: { get_property: [ compute_1, os_version ] }
      repository: https://github.com/QCDIS/azure_playbooks.git
  create_ssh_key:
    implementation: key/create_keys.yaml
    inputs:
      inventory:
        all:
          hosts:
            localhost:
              ansible_connection: local
              instances:
                compute:
                  os_distro : { get_property: [ compute, os_distro ]}
                compute_1:
                  os_distro : { get_property: [ compute, os_distro ]}
      repository: https://github.com/QCDIS/azure_playbooks.git
  delete_ssh_key:
    implementation: key/delete_keys.yaml
    inputs:
      inventory:
        all:
          hosts:
            localhost:
              ansible_connection: local
      repository: https://github.com/QCDIS/azure_playbooks.git
  install_requirements:
    implementation: install_requirements.yaml
    inputs:
      inventory:
        all:
          hosts:
            localhost:
              ansible_connection: local
      repository: https://github.com/QCDIS/azure_playbooks.git
  select_instance_type:
    implementation: info/get_inst_flavors.yaml
    inputs:
      extra_variables:
        region: { get_property: [ topology, domain ] }
      inventory:
        all:
          hosts:
            localhost:
              ansible_connection: local
              credentials: { get_attribute: [ topology, credentials ] }
              instances:
                compute:
                  disk_size: { get_property: [ compute, disk_size ] }
                  mem_size: { get_property: [ compute, mem_size ] }
                  num_cores: { get_property: [ compute, num_cores ] }
                compute_1:
                  disk_size: { get_property: [ compute_1, disk_size ] }
                  mem_size: { get_property: [ compute_1, mem_size ] }
                  num_cores: { get_property: [ compute, num_cores ] }
      repository: https://github.com/QCDIS/azure_playbooks.git
  select_network:
    implementation: network/create_network_interfaces.yaml
    inputs:
      extra_variables:
        region: { get_property: [ topology, domain ] }
      inventory:
        all:
          hosts:
            localhost:
              ansible_connection: local
              instances:
                compute:
                  os_distro : { get_property: [ compute, os_distro ]}
                compute_1:
                  os_distro : { get_property: [ compute, os_distro ]}
      repository: https://github.com/QCDIS/azure_playbooks.git
  set_attributes:
    implementation: set_attributes.yaml
    inputs:
      inventory:
        all:
          hosts:
            localhost:
              ansible_connection: local
      repository: https://github.com/QCDIS/azure_playbooks.git